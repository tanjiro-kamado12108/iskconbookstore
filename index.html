<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ISKCON BOOK STORE</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background-color: #f9f9f9; }
    header { background-color: #3b5998; padding: 15px; color: white; display: flex; justify-content: space-between; align-items: center; }
    .logo-container { display: flex; align-items: center; }
    .logo-container img { width: 50px; height: 50px; margin-right: 10px; border-radius: 5px; }
    .logo { font-size: 24px; font-weight: bold; }
    nav input { width: 300px; padding: 6px; border-radius: 5px; border: none; }
    nav button { padding: 6px 10px; margin-left: 5px; border-radius: 5px; background-color: #f0c14b; border: 1px solid #a88734; cursor: pointer; }
    .cart, .auth { cursor: pointer; font-size: 16px; margin-left: 10px; }
    .banner { background-color: #f7e7ce; padding: 10px; text-align: center; font-weight: bold; font-size: 16px; }
    .products { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; padding: 20px; }
    .product { border: 1px solid #ddd; padding: 15px; text-align: center; border-radius: 10px; background-color: white; }
    .product h3 { margin: 10px 0; font-size: 18px; }
    .product p { font-size: 14px; margin: 6px 0; }
    footer { background-color: #3b5998; color: white; text-align: center; padding: 12px; margin-top: 20px; font-size: 14px; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); justify-content: center; align-items: center; }
    .modal-content { background-color: #fff; padding: 20px; border-radius: 8px; width: 90%; max-width: 400px; text-align: center; }
    .modal input, .modal textarea { width: 90%; padding: 8px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc; }
    #cart-items p { margin: 8px 0; }
  </style>
</head>
<body>
  <header>
    <div class="logo-container">
      <img src="https://via.placeholder.com/50" alt="ISKCON Logo">
      <div class="logo">ISKCON BOOK STORE</div>
    </div>
    <nav>
      <input type="text" id="search" placeholder="Search books...">
      <button onclick="searchBooks()">Search</button>
    </nav>
    <div>
      <div class="cart" onclick="showCartModal()">🛒 Cart (<span id="cart-count">0</span>)</div>
      <div class="auth">👤 Login/Signup</div>
    </div>
  </header>

  <div class="banner">FREE BOOKMARK WITH EVERY ORDER | ORDERS ABOVE ₹1500 GET A FREE POSTER!</div>

  <main>
    <section class="products" id="product-list"></section>
  </main>

  <footer>
    © 2025 ISKCON BOOK STORE. Payments processed via mishrasandeep@fam | All rights reserved.
  </footer>

  <div id="cart-modal" class="modal">
    <div class="modal-content">
      <h3>Your Cart</h3>
      <div id="cart-items"></div>
      <p id="cart-total"></p>
      <p id="cart-offers"></p>
      <button onclick="showPurchaseModal()">Buy Now</button>
      <button onclick="closeCartModal()">Close</button>
    </div>
  </div>

  <div id="purchase-modal" class="modal">
    <div class="modal-content">
      <h3>Enter Detailed Address</h3>
      <textarea id="user-address" placeholder="House no, Building, Street, Area" required></textarea>
      <input type="text" id="user-city" placeholder="City" required>
      <input type="text" id="user-state" placeholder="State" required>
      <input type="text" id="user-pincode" placeholder="Pincode" required>
      <input type="text" id="user-location" placeholder="Nearby Landmark (optional)">
      <input type="text" id="user-contact" placeholder="Contact Number" required>
      <button onclick="completePurchase()">Submit Order</button>
      <button onclick="closePurchaseModal()">Cancel</button>
    </div>
  </div>

  <script>
    const books = [
      { id: 1, name: "Bhagavad Gita (Soft Bound)", description: "A compact and affordable edition for daily reading.", price: 500, stock: "In Stock" },
      { id: 2, name: "Bhagavad Gita (Hard Bound)", description: "Durable hardcover with vibrant illustrations.", price: 1000, stock: "In Stock" },
      { id: 3, name: "Srimad Bhagavatam (English)", description: "Complete 18-volume set covering Vedic literature.", price: 32900, stock: "Limited Stock" },
      { id: 4, name: "Chaitanya Caritamrita", description: "Life and teachings of Sri Chaitanya Mahaprabhu.", price: 12900, stock: "In Stock" },
      { id: 5, name: "Sri Isopanishad", description: "Ancient spiritual knowledge in pocket format.", price: 300, stock: "In Stock" },
      { id: 6, name: "Nectar of Devotion", description: "Explores the essence of Bhakti Yoga.", price: 1500, stock: "Out of Stock" }
    ];

    const cart = JSON.parse(localStorage.getItem('cart')) || [];

    function renderBooks() {
      document.getElementById('product-list').innerHTML = books.map(book => `
        <div class="product">
          <h3>${book.name}</h3>
          <p>${book.description}</p>
          <p><strong>Price:</strong> ₹${book.price}</p>
          <p><strong>Status:</strong> ${book.stock}</p>
          <button onclick="addToCart(${book.id}, '${book.name}', ${book.price})" ${book.stock === 'Out of Stock' ? 'disabled' : ''}>
            ${book.stock === 'Out of Stock' ? 'Unavailable' : 'Add to Cart'}
          </button>
        </div>
      `).join('');
    }

    function addToCart(id, name, price) {
      const item = cart.find(i => i.id === id);
      item ? item.quantity++ : cart.push({ id, name, price, quantity: 1 });
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      alert(`${name} added to cart.`);
    }

    function updateCartCount() {
      document.getElementById('cart-count').innerText = cart.reduce((sum, item) => sum + item.quantity, 0);
    }

    function showCartModal() {
      const cartItemsDiv = document.getElementById('cart-items');
      if (cart.length === 0) {
        cartItemsDiv.innerHTML = '<p>Your cart is empty.</p>';
        document.getElementById('cart-total').innerText = '';
        document.getElementById('cart-offers').innerText = '';
      } else {
        cartItemsDiv.innerHTML = cart.map(item => `
          <p>${item.name} - ₹${item.price} x ${item.quantity} 
            <button onclick="removeFromCart(${item.id})">-</button>
          </p>
        `).join('');

        const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        document.getElementById('cart-total').innerText = `Total: ₹${total}`;

        let offers = "";
        if (total > 0) offers += "✅ Free Bookmark included with your order! ";
        if (total >= 1500) offers += "🎁 Free Poster included with orders above ₹1500!";
        document.getElementById('cart-offers').innerText = offers;
      }
      document.getElementById('cart-modal').style.display = 'flex';
    }

    function closeCartModal() {
      document.getElementById('cart-modal').style.display = 'none';
    }

    function removeFromCart(id) {
      const itemIndex = cart.findIndex(item => item.id === id);
      if (itemIndex > -1) {
        cart[itemIndex].quantity--;
        if (cart[itemIndex].quantity === 0) cart.splice(itemIndex, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        showCartModal();
        updateCartCount();
      }
    }

    function showPurchaseModal() {
      document.getElementById('purchase-modal').style.display = 'flex';
    }

    function closePurchaseModal() {
      document.getElementById('purchase-modal').style.display = 'none';
    }

    function completePurchase() {
      const address = document.getElementById('user-address').value.trim();
      const city = document.getElementById('user-city').value.trim();
      const state = document.getElementById('user-state').value.trim();
      const pincode = document.getElementById('user-pincode').value.trim();
      const contact = document.getElementById('user-contact').value.trim();

      if (!address || !city || !state || !pincode || !contact) {
        alert('Please fill in all required fields.');
        return;
      }

      const orderId = 'ORD' + Math.floor(Math.random() * 1000000);
      alert(`Order ${orderId} placed successfully! Free Bookmark included.${cart.reduce((sum, item) => sum + item.price * item.quantity, 0) >= 1500 ? ' Free Poster included!' : ''}`);

      cart.length = 0;
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      closePurchaseModal();
      closeCartModal();
    }

    renderBooks();
    updateCartCount();
  </script>
</body>
</html>
